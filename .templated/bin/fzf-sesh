#!/usr/bin/env bash

CMD="sesh list -tziH | grep -v -F '[34mÓØà[39m _'"

$CMD | fzf-tmux -p 55%,60% \
		--no-sort --ansi --prompt="Û∞£á " \
    --preview-window=up:80% \
    --preview="tmux capture-pane -ep -t {2..} 2>/dev/null || eval eza --tree -L 2 {2..} --color=always" \
		--header="Û±ã± ^a Û∞âπ Û±ã± ^n Û∞êï Û±ã± ^d Û∞Öñ Û±ã± ^f Û∞çâ Û±ã± " \
		--bind="ctrl-a:change-prompt(Û∞£á )+reload($CMD)" \
		--bind="ctrl-n:execute(tmux new-session -d -t {2..})+reload($CMD)" \
		--bind="ctrl-f:change-prompt(üîé  )+reload(fd -uL -t d --prune -d 5 -p --glob '**/.git' $HOME/src | xargs dirname )" \
		--bind="ctrl-r:reload($CMD)" \
		--bind="ctrl-d:execute(tmux kill-session -t {2..})+change-prompt(Û∞£á )+reload($CMD)"
